<!DOCTYPE html>


<html lang="en" dir="ltr">
    {% load static %}
    <head>
        <meta charset="utf-8">
        <title>SDMS - {{screen_name}}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="{% static 'css/style2.css' %}">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="icon" href="{% static 'img/SDMS_Logo.png' %}">
        <script src="https://kit.fontawesome.com/ed50edad61.js" crossorigin="anonymous"></script>
    </head>

    <body onload="showTime(), loaddate()">
        <div class="driver_home">
            <div class="row">
                <div class="col-9 justify-content-start">
                    <div class="greeting">Hello {{first_name}}!</div>
                </div>
                <div class="col-2 justify-content-end">
                    <div id="MyClockDisplay" class="clock"></div>
                    <div class = "daydate">
                        <span id="dayname">Day</span> | 
                        <span id="month">Month</span>
                        <span id="daynum">00</span>, 
                        <span id="year">Year</span>
                    </div>
                </div>
                <div class="col-1 justify-content-end">
                    <a href="{% url 'SDMS:logout' %}">
                        <i class="fas fa-sign-out-alt" id="driver-logout"></i>
                    </a>
                </div>
            </div>
            
            <div class="row">
                <div class="col-2 justify-content-center">
                    <div class="home-container-1">
                        <h1>{{bag_total}}</h1>
                        <h4>total bags (week)</h4>
                    </div>
                    <div class="home-container-1">
                        <h1>{{active_trips}}</h1>
                        <h4>active trips</h4>
                    </div>
                </div>
                <div class="col-10 justify-content-center">
                    <div class="home-container-2">
                        <div class="row">
                            <div class="col-4 justify-content-center">
                                <h3 id="driver-trip-lbl">Active Trips</h3>
                            </div>
                            <div class="col-5 justify-content-center">
                                <div class="form-group">
                                    <div class="search-box-trips">
                                        <input class="form-control" type="text" id="tripSearch" name="tripSearch" placeholder="Search...">
                                    </div>
                                </div>
                            </div>
                            <div class="col-3 justify-content-center">
                                <button type='button' class= 'report-btn' onclick="location.href='{% url 'SDMS:driver-newtrip' %}'"> Bagong Trip </button>
                            </div>
                        </div>
                        <div class="app-table" id="trip-init">
                            <table class = "trip-table" id="driver-trip" >
                                <thead class= "trip-header" id="driver-trip-head">
                                    <tr>
                                        <th>Ref No.</th>
                                        <th>Farm</th>
                                        <th>Bags Delivered</th>
                                        <th>Trip Date</th>
                                        <th>Trip Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody class="trip-body" id="driver-trip-body">
                                    {% for t in trips %}
                                    <tr>
                                        <td id="table-body" data-heading="Ref No.">{{t.ref_num}}</td>
                                        <td id="table-body" data-heading="Farm">{{t.farm}}</td>
                                        <td id="table-body" data-heading="Bags Delivered">{{t.bag_count}}</td>
                                        <td id="table-body" data-heading="Trip Date">{{t.trip_date|date:'Y-m-d'}}</td>
                                        <td id="table-body" data-heading="Trip Status">{{t.trip_status}}</td>
                                        <td id="table-body" data-heading="Action">
                                            <a href="{% url 'SDMS:driver-viewtrip' t.id %}" class="table-edit-btn" id="driver-view-edit-btn">
                                                <i class="fa-solid fa-eye"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div class="trip-table-output" id="trip-table-output">
                            <table class = "trip-table" id="driver-trip" >
                                <thead class= "trip-header" id="driver-trip-head">
                                    <tr>
                                        <th>Ref No.</th>
                                        <th>Farm</th>
                                        <th>Bags Delivered</th>
                                        <th>Trip Date</th>
                                        <th>Trip Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody class="trip-body" id="driver-trip-body-output">

                                </tbody>
                            </table>
                            <div class="table-error-msg" id="table-error">

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="{% static 'js/main.js' %}"></script>
        <script type="text/javascript" src="{% static 'js/driver_trip_search.js' %}"></script>
    </body>
</html>